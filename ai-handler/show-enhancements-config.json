{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "name": "HYDRA Show Enhancements Configuration",
  "version": "1.0.0",
  "description": "Configuration for displaying prompt optimization enhancements and metadata",

  "feature": {
    "name": "showEnhancements",
    "type": "boolean",
    "default": true,
    "description": "When enabled, displays detailed information about prompt optimizations applied",
    "scope": ["global", "session", "request"],
    "priority": "request > session > global > environment > default"
  },

  "output": {
    "format": {
      "type": "structured",
      "options": ["structured", "compact", "json", "silent"],
      "default": "structured"
    },
    "colors": {
      "enabled": true,
      "scheme": {
        "header": { "foreground": "Cyan", "style": "Bold" },
        "category": { "foreground": "Yellow" },
        "clarity": {
          "excellent": { "foreground": "Green", "threshold": 90 },
          "good": { "foreground": "Green", "threshold": 75 },
          "fair": { "foreground": "Yellow", "threshold": 60 },
          "needsWork": { "foreground": "DarkYellow", "threshold": 40 },
          "poor": { "foreground": "Red", "threshold": 0 }
        },
        "enhancement": { "foreground": "Magenta" },
        "suggestion": { "foreground": "DarkCyan" },
        "language": { "foreground": "Blue" },
        "warning": { "foreground": "Yellow", "style": "Bold" },
        "error": { "foreground": "Red", "style": "Bold" }
      }
    },
    "symbols": {
      "bullet": "â€¢",
      "arrow": "â†’",
      "check": "âœ“",
      "cross": "âœ—",
      "info": "â„¹",
      "warning": "âš ",
      "enhancement": "âš¡",
      "category": "ğŸ“",
      "clarity": "ğŸ“Š",
      "language": "ğŸ’»"
    }
  },

  "displayFields": {
    "always": ["category", "clarityScore", "clarityQuality"],
    "whenEnhanced": ["enhancements", "optimizedPrompt"],
    "optional": ["originalPrompt", "language", "clarityIssues", "claritySuggestions", "modelOptimization", "wasEnhanced"],
    "metadata": ["processingTimeMs", "tokenEstimate", "cacheHit"]
  },

  "enhancementTypes": {
    "model-prefix": {
      "id": "model-prefix",
      "displayName": "Added model-specific prefix",
      "addedText": { "qwen2.5-coder": "You are an expert programmer. " }
    },
    "code-instructions": {
      "id": "code-instructions",
      "displayName": "Added code-specific instructions",
      "addedText": "Provide clean, well-documented code. Include error handling where appropriate. Follow best practices for the language."
    },
    "analysis-instructions": {
      "id": "analysis-instructions",
      "displayName": "Added analysis-specific instructions",
      "addedText": "Provide a structured analysis. Consider multiple perspectives. Support conclusions with reasoning."
    },
    "language-tag": {
      "id": "language-tag",
      "displayName": "Added language tag",
      "format": "[{language}] "
    },
    "structure-wrapper": {
      "id": "structure-wrapper",
      "displayName": "Added structure wrapper",
      "format": "Task: {prompt}\n\nPlease provide a clear, well-structured response."
    }
  },

  "clarityScoring": {
    "baseScore": 100,
    "penalties": {
      "tooShort": { "threshold": 10, "penalty": 30 },
      "briefPrompt": { "threshold": 30, "penalty": 15 },
      "vagueWords": { "penaltyEach": 5, "words": ["something", "stuff", "thing", "etc", "whatever"] },
      "missingContext": { "penalty": 10 }
    },
    "bonuses": {
      "specificIndicators": { "bonusEach": 3, "words": ["specifically", "exactly", "must", "should"] }
    },
    "qualityLabels": {
      "excellent": { "minScore": 90 },
      "good": { "minScore": 75 },
      "fair": { "minScore": 60 },
      "needsImprovement": { "minScore": 40 },
      "poor": { "minScore": 0 }
    }
  },

  "configuration": {
    "locations": {
      "global": "ai-handler/ai-config.json â†’ settings.promptOptimizer.showEnhancements",
      "session": "ai-handler/ai-state.json â†’ session.showEnhancements",
      "gemini": "~/.gemini/extensions/ollama-hydra/prompt-optimizer-gemini.json â†’ settings.showEnhancements"
    }
  },

  "examples": {
    "structured": [
      "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—",
      "â•‘  âš¡ PROMPT OPTIMIZATION                                       â•‘",
      "â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£",
      "â•‘  ğŸ“ Category:  code                                          â•‘",
      "â•‘  ğŸ’» Language:  python                                        â•‘",
      "â•‘  ğŸ“Š Clarity:   72/100 (Fair)                                 â•‘",
      "â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£",
      "â•‘  âš¡ Enhancements Applied:                                     â•‘",
      "â•‘    â€¢ Added language tag: python                              â•‘",
      "â•‘    â€¢ Added code-specific instructions                        â•‘",
      "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
    ],
    "compact": "[code|python] Clarity: 72/100 (Fair) | +2 enhancements"
  },

  "integration": {
    "powershell": {
      "enableGlobally": "$config.settings.promptOptimizer.showEnhancements = $true",
      "disableGlobally": "$config.settings.promptOptimizer.showEnhancements = $false",
      "function": "Set-AIConfig -ShowEnhancements $true"
    },
    "environment": {
      "AI_SHOW_ENHANCEMENTS": "true|false",
      "AI_ENHANCEMENT_FORMAT": "structured|compact|json|silent"
    },
    "cli": {
      "--show-enhancements": "Enable for this request",
      "--no-enhancements": "Disable for this request",
      "-ef <format>": "Set output format"
    }
  },

  "metadata": {
    "_meta.promptOptimization": {
      "applied": "boolean",
      "originalPrompt": "string",
      "optimizedPrompt": "string",
      "category": "string",
      "language": "string|null",
      "clarity": { "score": "number", "quality": "string", "issues": "array", "suggestions": "array" },
      "enhancements": { "applied": "array", "count": "number", "types": "array" },
      "processing": { "timeMs": "number", "cached": "boolean", "timestamp": "ISO string" }
    }
  },

  "defaults": {
    "showEnhancements": true,
    "outputFormat": "structured",
    "colorsEnabled": true,
    "autoOptimize": true,
    "lowClarityThreshold": 60
  }
}
